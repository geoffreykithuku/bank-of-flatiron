{"ast":null,"code":"import _defineProperty from\"/home/lucky/Development/code/phase_2/bank-of-flatiron/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/lucky/Development/code/phase_2/bank-of-flatiron/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/lucky/Development/code/phase_2/bank-of-flatiron/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useEffect,useState}from\"react\";import TransactionsList from\"./TransactionsList\";import Search from\"./Search\";import AddTransactionForm from\"./AddTransactionForm\";function AccountContainer(){//settin up states\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),transactions=_useState2[0],setTransactions=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),query=_useState4[0],setQuery=_useState4[1];// initializing form data object\nvar _useState5=useState({id:0,date:\"\",description:\"\",category:\"\",amount:\"\"}),_useState6=_slicedToArray(_useState5,2),transactionForm=_useState6[0],setTransactionForm=_useState6[1];//fetch data using useEffect and fetch\nvar fetchData=function fetchData(){return fetch(\"http://localhost:8001/transactions?q=\"+query).then(function(res){return res.json();}).then(function(data){setTransactions(data);}).catch(function(err){return console.log(err+\" \"+\"Run server first\");});};useEffect(fetchData,[query]);//handling form Data changes\nfunction handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setTransactionForm(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});}// post data to db.json when the form is submitted\nfunction handleSubmit(e){e.preventDefault();fetch(\"http://localhost:8001/transactions\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(transactionForm)}).then(function(){fetchData();}).catch(function(err){return console.log(err+\" \"+\"Run server first\");});}// handling search form\nfunction handleSearch(e){setQuery(function(query){return e.target.value;});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Search,{handleSearch:handleSearch}),/*#__PURE__*/_jsx(AddTransactionForm,{handleChange:handleChange,handleSubmit:handleSubmit,transactionForm:transactionForm}),/*#__PURE__*/_jsx(TransactionsList,{transactionsObj:transactions})]});}export default AccountContainer;","map":{"version":3,"sources":["/home/lucky/Development/code/phase_2/bank-of-flatiron/src/components/AccountContainer.js"],"names":["React","useEffect","useState","TransactionsList","Search","AddTransactionForm","AccountContainer","transactions","setTransactions","query","setQuery","id","date","description","category","amount","transactionForm","setTransactionForm","fetchData","fetch","then","res","json","data","catch","err","console","log","handleChange","e","target","name","value","prevData","handleSubmit","preventDefault","method","headers","body","JSON","stringify","handleSearch"],"mappings":"ifAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oBAA7B,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,kBAAP,KAA+B,sBAA/B,CAEA,QAASC,CAAAA,gBAAT,EAA4B,CAC1B;AAD0B,cAGcJ,QAAQ,CAAC,EAAD,CAHtB,wCAGnBK,YAHmB,eAGLC,eAHK,8BAIAN,QAAQ,CAAC,EAAD,CAJR,yCAInBO,KAJmB,eAIZC,QAJY,eAM1B;AAN0B,eAQoBR,QAAQ,CAAC,CACrDS,EAAE,CAAE,CADiD,CAErDC,IAAI,CAAE,EAF+C,CAGrDC,WAAW,CAAE,EAHwC,CAIrDC,QAAQ,CAAE,EAJ2C,CAKrDC,MAAM,CAAE,EAL6C,CAAD,CAR5B,yCAQnBC,eARmB,eAQFC,kBARE,eAgB1B;AACA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB,MAAOC,CAAAA,KAAK,CAAC,wCAA0CV,KAA3C,CAAL,CACJW,IADI,CACC,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EADD,EAEJF,IAFI,CAEC,SAACG,IAAD,CAAU,CACdf,eAAe,CAACe,IAAD,CAAf,CACD,CAJI,EAKJC,KALI,CAKE,SAACC,GAAD,QAASC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAAG,GAAN,CAAY,kBAAxB,CAAT,EALF,CAAP,CAMD,CAPD,CASAxB,SAAS,CAACiB,SAAD,CAAY,CAACT,KAAD,CAAZ,CAAT,CAEA;AAEA,QAASmB,CAAAA,YAAT,CAAsBC,CAAtB,CAAyB,eACCA,CAAC,CAACC,MADH,CACfC,IADe,WACfA,IADe,CACTC,KADS,WACTA,KADS,CAEvBf,kBAAkB,CAAC,SAACgB,QAAD,CAAc,CAC/B,sCACKA,QADL,wBAEGF,IAFH,CAEUC,KAFV,GAID,CALiB,CAAlB,CAMD,CAED;AAEA,QAASE,CAAAA,YAAT,CAAsBL,CAAtB,CAAyB,CACvBA,CAAC,CAACM,cAAF,GACAhB,KAAK,CAAC,oCAAD,CAAuC,CAC1CiB,MAAM,CAAE,MADkC,CAE1CC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFiC,CAK1CC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAexB,eAAf,CALoC,CAAvC,CAAL,CAOGI,IAPH,CAOQ,UAAM,CACVF,SAAS,GACV,CATH,EAUGM,KAVH,CAUS,SAACC,GAAD,QAASC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAAG,GAAN,CAAY,kBAAxB,CAAT,EAVT,EAWD,CAED;AACA,QAASgB,CAAAA,YAAT,CAAsBZ,CAAtB,CAAyB,CACvBnB,QAAQ,CAAC,SAACD,KAAD,QAAWoB,CAAAA,CAAC,CAACC,MAAF,CAASE,KAApB,EAAD,CAAR,CACD,CAED,mBACE,oCACE,KAAC,MAAD,EAAQ,YAAY,CAAES,YAAtB,EADF,cAEE,KAAC,kBAAD,EACE,YAAY,CAAEb,YADhB,CAEE,YAAY,CAAEM,YAFhB,CAGE,eAAe,CAAElB,eAHnB,EAFF,cAOE,KAAC,gBAAD,EAAkB,eAAe,CAAET,YAAnC,EAPF,GADF,CAWD,CAED,cAAeD,CAAAA,gBAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport TransactionsList from \"./TransactionsList\";\nimport Search from \"./Search\";\nimport AddTransactionForm from \"./AddTransactionForm\";\n\nfunction AccountContainer() {\n  //settin up states\n\n  const [transactions, setTransactions] = useState([]);\n  const [query, setQuery] = useState(\"\");\n\n  // initializing form data object\n\n  const [transactionForm, setTransactionForm] = useState({\n    id: 0,\n    date: \"\",\n    description: \"\",\n    category: \"\",\n    amount: \"\",\n  });\n\n  //fetch data using useEffect and fetch\n  const fetchData = () => {\n    return fetch(\"http://localhost:8001/transactions?q=\" + query)\n      .then((res) => res.json())\n      .then((data) => {\n        setTransactions(data);\n      })\n      .catch((err) => console.log(err + \" \" + \"Run server first\"));\n  };\n\n  useEffect(fetchData, [query]);\n\n  //handling form Data changes\n\n  function handleChange(e) {\n    const { name, value } = e.target;\n    setTransactionForm((prevData) => {\n      return {\n        ...prevData,\n        [name]: value,\n      };\n    });\n  }\n\n  // post data to db.json when the form is submitted\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetch(\"http://localhost:8001/transactions\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(transactionForm),\n    })\n      .then(() => {\n        fetchData();\n      })\n      .catch((err) => console.log(err + \" \" + \"Run server first\"));\n  }\n\n  // handling search form\n  function handleSearch(e) {\n    setQuery((query) => e.target.value);\n  }\n\n  return (\n    <div>\n      <Search handleSearch={handleSearch} />\n      <AddTransactionForm\n        handleChange={handleChange}\n        handleSubmit={handleSubmit}\n        transactionForm={transactionForm}\n      />\n      <TransactionsList transactionsObj={transactions} />\n    </div>\n  );\n}\n\nexport default AccountContainer;\n"]},"metadata":{},"sourceType":"module"}